# Projeto: Pesquisa de PreÃ§os com Dados do PNCP via API

Este projeto tem como objetivo realizar a coleta de dados pÃºblicos do Portal Nacional de ContrataÃ§Ãµes PÃºblicas (PNCP), salvando os resultados em um banco de dados PostgreSQL para posterior anÃ¡lise e uso em estimativas de preÃ§os para licitaÃ§Ãµes.

---

## ðŸ“¦ Estrutura do Projeto

```
â”œâ”€â”€ data/                    # DiretÃ³rio para dados temporÃ¡rios (ignorado pelo Git)
â”œâ”€â”€ modelo_salvo_local/     # Modelos treinados (ignorado pelo Git)
â”œâ”€â”€ src/
â”‚   â””â”€â”€ api_coleta/
â”‚       â””â”€â”€ pncp_contratacoes.py  # Script principal para coleta de dados homologados
â”œâ”€â”€ .env                    # VariÃ¡veis de ambiente (nÃ£o versionado)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ requirements.txt
```

---

## âš™ï¸ Requisitos

- Python 3.10 ou superior
- PostgreSQL instalado localmente

---

## ðŸ ConfiguraÃ§Ã£o do Ambiente Python

1. Crie e ative o ambiente virtual:

```bash
python3 -m venv venv
source venv/bin/activate   # Linux/macOS
# venv\Scripts\activate.bat  # Windows
```

2. Instale as dependÃªncias:

```bash
pip install -r requirements.txt
```

> O `requirements.txt` deve conter:
> ```txt
> pandas
> requests
> python-dotenv
> SQLAlchemy
> psycopg2-binary
> ```

---

## ðŸ› ï¸ ConfiguraÃ§Ã£o do Banco de Dados PostgreSQL

1. Acesse o terminal como usuÃ¡rio `postgres`:

```bash
sudo -u postgres psql
```

2. Crie o banco de dados e usuÃ¡rio:

```sql
CREATE DATABASE pesquisa_precos;
CREATE USER coletaapis WITH PASSWORD 'Prefeitura321';
GRANT ALL PRIVILEGES ON DATABASE pesquisa_precos TO coletaapis;
\c pesquisa_precos
GRANT ALL PRIVILEGES ON SCHEMA public TO coletaapis;
GRANT USAGE ON SCHEMA public TO coletaapis;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO coletaapis;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO coletaapis;
\q
```

---

## ðŸ” VariÃ¡veis de Ambiente (.env)

Crie um arquivo `.env` com as credenciais do banco:

```ini
DATABASE_URL=postgresql+psycopg2://coletaapis:Prefeitura321@localhost:5432/pesquisa_precos

POSTGRES_USER=coletaapis
POSTGRES_PASSWORD=Prefeitura321
POSTGRES_DB=pesquisa_precos
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
```

> **Importante:** esse arquivo **nÃ£o deve ser versionado**.

---

## ðŸš€ Executar a Coleta de Dados

```bash
python src/api_coleta/pncp_contratacoes.py
```

O script irÃ¡:

- Consultar as APIs pÃºblicas de contrataÃ§Ãµes homologadas do PNCP
- Coletar os dados de 20 processos sequenciais
- Salvar o resultado no banco PostgreSQL na tabela `pncp_contratacoes`

---

## ðŸ“Œ PrÃ³ximos Passos

- IntegraÃ§Ã£o com outras APIs pÃºblicas (ex: TCE-SP, SIASG, ComprasNet)
- Interface para seleÃ§Ã£o automÃ¡tica por item CATMAT
- Sistema de busca inteligente por similaridade
- Interface web para nÃ£o tÃ©cnicos (futura integraÃ§Ã£o com Streamlit ou Flask)

---

## âœ… Status Atual

âœ” Ambiente configurado com VS Code + GitHub + PostgreSQL + Python 
âœ” Coleta de dados via API funcionando com armazenamento no banco
âœ” UsuÃ¡rio exclusivo `coletaapis` configurado com seguranÃ§a 

---

## ðŸ“¬ Contato

Este projeto Ã© de uso pÃºblico e pode ser adaptado por qualquer prefeitura ou Ã³rgÃ£o que deseje automatizar sua coleta de preÃ§os pÃºblicos. Sinta-se Ã  vontade para contribuir ou adaptar conforme suas necessidades!

---

> Criado com ðŸ’» por Luiz com suporte do ChatGPT/OpenAI.
